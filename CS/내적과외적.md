# 내적과외적

 ![header](https://capsule-render.vercel.app/api?color=gradient&type=waving)

## 내적 vs 외적, 그리고 게임에서의 활용 방안



### 내적 

**내적(Dot Product)** 은 두 벡터의 <u>방향 유사도</u>를 나타내는 연산으로, AI의 시야 판정, FOV(Field of View) 계산, 목표 지점과의 방향 비교 등에 사용된다.

내적 결과 = <U>스칼라</U> 
<br>
<br>

**내적을 구하는 식**

<code>
 A dot B = |A|*|B|*cos theta
</code>
<br>
or

<code>
 A dot B = A.x*B.x + A.y*B.y + A.z*B.z ....+ A.n*B.n
</code>

<br>
<br>
</br>
두 벡터의 내적을 구할때는 A 벡터와 B 벡터의 크기를 1로 맞추는 정규화를 진행 한 후에 cos theta 를 구해, -1~1 이내로 나오는 값을 토대로 두 벡터의 방향 차이를 유추한다.


<br>
</br>

<b>1 * 1 * cos $\theta$ = -1~1</b>


![LocalVariableImage](/Images/Circle1.jpg) 

**값이 1**이면 60분법으로 사잇각이 0도가 나오므로 두 벡터가 <u>같은 방향</u>을 바라보고 있다는 것을 확인 가능 

**값이 0**이면 사잇각이 90도, 즉 <u>직교</u>함을 확인이 가능하다.(cos 은 빗변 분의 x 증가량이므로 0이면 단위원 기준 y 축에 비교 대상의 벡터가 위치함)

**값이 -1**이면 사잇각이 -180도, 즉 x축의 음의 방향으로 비교 대상 벡터가 향하고 있으므로 <u>서로 반대 방향</u>을 향함을 알 수 있다.

<u>이 값을 통해 0~1 일때는 기준 벡터의 전방에 비교 대상 벡터(목표 대상)이 위치함을 , -1~0 의 값이 나올 때는 기준으로 삼는 벡터보다 비교 대상 벡터가 뒤에 있음을 유추할 수 있다.</u>

<br>
<br>
<br>
<br>
<br>


### 외적


**외적(Cross Product)** 은 두 벡터의 수직 벡터를 구하는 연산으로, 법선 벡터 계산, 캐릭터 회전 방향 판별, 물리 시뮬레이션에서 회전 힘(Torque) 계산 등에 활용된다.

외적 결과 = <U>두 벡터에 직교하는 벡터</U> 

<pre>
<code>
외적 벡터의 크기(길이) 구하는 식 : 
 A X B = |A|*|B|*sin theta
</code>
</pre>
<br>

외적의 길이는 피연산자 벡터들로 이루어지는 평행사변형의 넓이와 같다.
<br>
<br>
<br>

<pre>
<code>
외적 벡터 구하는 식 : 
 A = V(x1,y1,z1)
 B = V(x2,y2,z2) 라 할때,

 행렬식을 전개하면 

 A X B = V(y1z2-y2z1,x2z1-x1z2,x1y2-x2y1)
</code>
</pre>
<br>
<br>


<b>내적은 곱하는 것에 순서가 상관이 없지만, 외적은 곱하는 순서에 따라 나오는 외적 벡터의 방향이 달라진다. (교환법칙 X)</b>

![LocalVariableImage](/Images/외적순서.jpg) 

<br>
<br>
<br>
<code>
결론: 
A X B  != B X A
</code>

<br>
<br>
<br>


![LocalVariableImage](/Images/CalculateNormal.png) 

<pre>
<code>
왼손 좌표계 기준 (전방이 z축)

A X B = N 

<b>N 벡터의 y 축 값 =  음수~양수</b>
</code>
</pre>

<br>
<br>

유니티의 왼손 좌표계를 기준으로 z축의 양의 방향으로 향하는 A 벡터와, x축의 양 또는 음의 방향으로 향하는 B 벡터를 직교하는 **외적 벡터(N)**를 구했을 때,

**N 벡터의 y 축의 값이 양수인지 , 혹은 음수인지를 판별**하여 기준벡터(A) 에서 비교벡터(B)가 <u>어느 방향으로 회전</u>해 있는지를 판별할 수 있다.

**y 값이 양수**이면, 기준 벡터(A)가 바라보는 방향보다 비교벡터(B)가 더 **오른쪽**을 향하고 있음을 알 수 있다. 기즈모 상에 보이는 좌표계와 동일하다 볼 수 있다.

반면 **y 값이 음수**면, 기준 벡터(A)가 바라보는 방향보다 비교벡터(B)가 **왼쪽**에 있음을 확인할 수 있다.

<br>
<br>
<br>
<br>
<br>
<br>

외적의 또다른 활용 방안으로는 어떤 삼각형이 있고 임의의 점이 삼각형 내부에 있는지 혹은 외부에 있는지 판별할 때 사용한다.









따라서, 게임 개발에서는 **내적**을 이용해 시야와 목표 방향을 판별하고, **외적**을 이용해 캐릭터 회전 및 충돌 판정을 수행할 수 있다.


삼각형의 점이 있을때 , 외부에 있는지 내부에 있는지 판별할때 외적을 사용

두 원이 곂치는지 안 곂치는지 -> 두 구심점을 잇는 벡터와  두 원의 반지름의 길이가 크면

해시 테이블을 전체적으로 순회할 경우 -> 비연속이기 때문에 캐시 미스가 발생

solid 원칙 - 어떤원칙을 실제 개발해보면서 제일 크게 와닿는지 

포물선 - 베지어 곡선 , 캣멀롬 곡선 두개 개념 공부


















