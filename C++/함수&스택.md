# 함수 & 스택 


 ![header](https://capsule-render.vercel.app/api?color=gradient&type=waving)

### 함수&스택

  함수 : Input & Output 이 있는 프로시져


예시
<pre>
<code>

반환타입 함수이름 (인자타입 매개변수 이름(생략 가능))  
{

  Body  
  .  
  .  
  .  
  .  
  return 반환값    
  
}

int main()  
{  


  함수이름(매개변수); <<-함수 Call


  return; 

}

</code>
</pre>

매개변수는 함수 안에서만 사용 가능하며 {} 을 빠져나올 시 함수와 함께 스택에서 제거된다. 매개변수는 생략 가능하지만, 함수 반환형은 생략할 수 없다.  




### 스택 프레임 

![StackFrameImage](/Images/img_c_stackframe_01.png)


**스택 프레임(Stack Frame)** 은 함수의 호출과 반환을 위해 임시적으로 저장되는 메모리 영역이며, 함수의 호출과 함께 리턴 주소값(함수 호출 후 다음 명령어의 위치) , 함수에서 선언된 지역 변수 등이 저장된다.


함수는 중첩 호출이 가능하기 때문에, 유동적으로 메모리 유효 범위가 확장 가능함을 고려해야 한다.  

  
스택은 높은 주소→ 낮은 주소 순으로 메모리가 로드된다
<br>
<br>


디버깅 모드에서 어셈블리 코드를 통해 확인해보자
<br>
<br>
<br>



F5 를 이용한 디버깅 모드의 코드 부분  

![StackIDECodeImage](/Images/StackIdeImage1.png)
<br>
<br>

ALT+8 을 눌러 확인한 어셈블리 코드 부분

![StackIDECodeImage](/Images/StackIdeImage2.png)


매개변수 a, b 가 담긴 eax , ecx 를 push eax , push ecx  명령어를 통해 먼저 스택에 Push 하는 것을 확인할 수 있다. 즉 매개변수가 스택에 가장 먼저 쌓인다.
       
<br>
<br>


Push 명령어를 통해 ESP(스택포인터)가 낮은 주소로 이동하며 전 8바이트 주소에는 eax 레지스터가 스택에 로드됨을 확인할 수 있다.

 
 
